import{r as t,c as i,h as e,H as s,g as n}from"./p-b662e034.js";function a(t,i){const e=new Date(t);return e.setDate(e.getDate()+i),e}function h(t){return k(new Date(`${String(y(t)).padStart(4,"0")}-${String(l(t)).padStart(2,"0")}-01`))}function o(t){if(t instanceof Date)return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function r(t){const i=h(t);return i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),i}function l(t){return t.getMonth()+1}function c(t){return a(t,1)}function u(t){const i=new Date(t);return i.setDate(1),i.setMonth(i.getMonth()+1),i}function d(t){const i=new Date(t);return i.setFullYear(i.getFullYear()+1),i}function v(t){return g(t,1)}function p(t){const i=new Date(t);return i.setDate(1),i.setMonth(i.getMonth()-1),i}function w(t){const i=new Date(t);return i.setFullYear(i.getFullYear()-1),i}function y(t){return t.getFullYear()}function b(t,i){return!!(t&&i&&i.from&&i.to)&&(t>=(i.from<i.to?i.from:i.to)&&t<=(i.from<i.to?i.to:i.from))}function f(t,i){return!(!t||!i)&&t.getFullYear()===i.getFullYear()&&t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()}function k(t){const i=new Date(t);return i.setMinutes(i.getMinutes()+i.getTimezoneOffset()),i}function g(t,i){const e=new Date(t);return e.setDate(e.getDate()-i),e}const D={clearButton:"Clear value",monthSelect:"Select month",nextMonthButton:"Next month",nextYearButton:"Next year",picker:"Choose date",previousMonthButton:"Previous month",previousYearButton:"Previous year",todayButton:"Show today",yearSelect:"Select year"},m=class{constructor(e){t(this,e),this.selectDate=i(this,"selectDate",7),this.changeMonth=i(this,"changeMonth",7),this.disabled=!1,this.disableDate=()=>!1,this.elementClassName="wc-datepicker",this.firstDayOfWeek=0,this.labels=D,this.locale=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US",this.showClearButton=!1,this.showMonthStepper=!0,this.showTodayButton=!1,this.showYearStepper=!1,this.startDate=o(new Date),this.maxSearchDays=365,this.goToRangeStartOnSelect=!0,this.init=()=>{this.currentDate=this.startDate?k(new Date(this.startDate)):new Date,this.updateWeekdays()},this.getAvailableDate=(t,i)=>{let e,s=!1;switch(i){case"previousDay":e=v(t);break;case"nextDay":e=c(t);break;case"previousSameWeekDay":e=g(t,7);break;case"nextSameWeekDay":e=a(t,7);break;case"firstOfMonth":e=h(t);break;case"lastOfMonth":e=r(t);break;case"previousMonth":e=p(t);break;case"nextMonth":e=u(t);break;case"previousYear":e=w(t);break;case"nextYear":e=d(t)}for(;this.disableDate(e)&&!s;){switch(i){case"previousDay":case"lastOfMonth":e=v(e);break;case"nextDay":case"firstOfMonth":case"previousMonth":case"nextMonth":case"previousYear":case"nextYear":e=c(e);break;case"previousSameWeekDay":e=g(e,7);break;case"nextSameWeekDay":e=a(e,7)}switch(i){case"firstOfMonth":case"lastOfMonth":case"previousYear":case"nextYear":s=e.getMonth()!==t.getMonth();break;case"previousMonth":s=e.getMonth()!==t.getMonth()-1;break;case"nextMonth":s=e.getMonth()!==t.getMonth()+1;break;default:s=!b(e,{from:g(t,this.maxSearchDays),to:a(t,this.maxSearchDays)})}}return s?t:e},this.nextMonth=()=>{this.updateCurrentDate(u(this.currentDate))},this.nextYear=()=>{this.updateCurrentDate(d(this.currentDate))},this.previousMonth=()=>{this.updateCurrentDate(p(this.currentDate))},this.previousYear=()=>{this.updateCurrentDate(w(this.currentDate))},this.showToday=()=>{this.updateCurrentDate(new Date)},this.clear=()=>{this.value=void 0,this.selectDate.emit(void 0)},this.onClick=t=>{if(this.disabled)return;const i=t.target.closest("[data-date]");if(!Boolean(i))return;const e=k(new Date(i.dataset.date));this.updateCurrentDate(e),this.onSelectDate(e)},this.onMonthSelect=t=>{const i=+t.target.value-1,e=new Date(this.currentDate);e.setMonth(i),this.updateCurrentDate(e)},this.onYearSelect=t=>{let i=+t.target.value;const e=t.target;isNaN(i)?(i=(new Date).getFullYear(),e.value=String(i)):i<0?(i=0,e.value=String(i)):i>9999&&(i=9999,e.value=String(i));const s=new Date(this.currentDate);s.setFullYear(i),this.updateCurrentDate(s)},this.onKeyDown=t=>{this.disabled||("ArrowLeft"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"previousDay"),!0)):"ArrowRight"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"nextDay"),!0)):"ArrowUp"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"previousSameWeekDay"),!0)):"ArrowDown"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"nextSameWeekDay"),!0)):"PageUp"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,t.shiftKey?"previousYear":"previousMonth"),!0)):"PageDown"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,t.shiftKey?"nextYear":"nextMonth"),!0)):"Home"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"firstOfMonth"),!0)):"End"===t.code?(t.preventDefault(),this.updateCurrentDate(this.getAvailableDate(this.currentDate,"lastOfMonth"),!0)):"Space"!==t.code&&"Enter"!==t.code||(t.preventDefault(),this.onSelectDate(this.currentDate)))},this.onMouseEnter=t=>{if(this.disabled)return;const i=k(new Date(t.target.closest("td").dataset.date));this.hoveredDate=i},this.onMouseLeave=()=>{this.hoveredDate=void 0}}componentWillLoad(){this.init()}watchFirstDayOfWeek(){this.updateWeekdays()}watchLocale(){Boolean(this.locale)||(this.locale=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US"),this.updateWeekdays()}watchRange(){this.value=void 0,this.selectDate.emit(void 0)}watchStartDate(){this.currentDate=this.startDate?k(new Date(this.startDate)):new Date}watchValue(){Boolean(this.value)&&(Array.isArray(this.value)?this.currentDate=this.value.length>1&&!this.goToRangeStartOnSelect?this.value[1]:this.value[0]:this.value instanceof Date&&(this.currentDate=this.value))}componentDidRender(){this.moveFocusAfterMonthChanged&&(this.focusDate(this.currentDate),this.moveFocusAfterMonthChanged=!1)}updateWeekdays(){var t,i;this.weekdays=(t=0===this.firstDayOfWeek?7:this.firstDayOfWeek,i=this.locale,new Array(7).fill(void 0).map(((i,e)=>(t+e)%7+1)).map((t=>{const e=k(new Date(`2006-01-0${t}`));return[Intl.DateTimeFormat(i,{weekday:"short"}).format(e),Intl.DateTimeFormat(i,{weekday:"long"}).format(e)]})))}getClassName(t){return Boolean(t)?`${this.elementClassName}__${t}`:this.elementClassName}getCalendarRows(){const t=function(t,i,e){const s=[],n=h(t),a=0===n.getDay()?7:n.getDay(),o=r(t),l=0===o.getDay()?7:o.getDay(),u=1===e?7:e-1,d=[],p=[];{let t=(7-e+a)%7,i=v(n);for(;t>0;)d.push(i),i=v(i),t-=1;d.reverse();let s=(7-l+u)%7,h=c(o);for(;s>0;)p.push(h),h=c(h),s-=1}let w=n;for(;w.getMonth()===t.getMonth();)s.push(w),w=c(w);return[...d,...s,...p]}(this.currentDate,0,0===this.firstDayOfWeek?7:this.firstDayOfWeek),i=[];for(let e=0;e<t.length;e+=7){const s=t.slice(e,e+7);i.push(s)}return i}getTitle(){if(Boolean(this.value)){if(this.isRangeValue(this.value)){const t=Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long",year:"numeric"}).format(this.value[0]),i=this.value[1]?Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long",year:"numeric"}).format(this.value[1]):void 0;return Boolean(i)?`${t} - ${i}`:t}return Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long",year:"numeric"}).format(this.value)}}focusDate(t){var i;null===(i=this.el.querySelector(`[data-date="${o(t)}"]`))||void 0===i||i.focus()}updateCurrentDate(t,i){const e=t.getMonth(),s=t.getFullYear();s>9999||s<0||((e!==this.currentDate.getMonth()||s!==this.currentDate.getFullYear())&&(this.changeMonth.emit({month:l(t),year:y(t)}),i&&(this.moveFocusAfterMonthChanged=!0)),this.currentDate=t,i&&this.focusDate(this.currentDate))}onSelectDate(t){var i,e;if(!this.disableDate(t))if(this.isRangeValue(this.value)){const e=void 0===(null===(i=this.value)||void 0===i?void 0:i[0])||2===this.value.length?[t]:[this.value[0],t];2===e.length&&e[0]>e[1]&&e.reverse();const s=void 0===e[1]?[o(e[0])]:[o(e[0]),o(e[1])];this.value=e,this.selectDate.emit(s)}else{if((null===(e=this.value)||void 0===e?void 0:e.getTime())===t.getTime())return;this.value=t,this.selectDate.emit(o(t))}}isRangeValue(t){return this.range}render(){const t=this.showTodayButton||this.showClearButton;return e(s,null,e("div",{"aria-disabled":String(this.disabled),"aria-label":this.labels.picker,class:{[this.getClassName()]:!0,[`${this.getClassName()}--disabled`]:this.disabled},role:"group"},e("div",{class:this.getClassName("header")},e("span",{"aria-atomic":"true","aria-live":"polite",class:"visually-hidden"},this.getTitle()),this.showYearStepper&&e("button",{"aria-label":this.labels.previousYearButton,class:this.getClassName("previous-year-button"),disabled:this.disabled,innerHTML:this.previousYearButtonContent||void 0,onClick:this.previousYear,type:"button"},e("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},e("polyline",{points:"11 17 6 12 11 7"}),e("polyline",{points:"18 17 13 12 18 7"}))),this.showMonthStepper&&e("button",{"aria-label":this.labels.previousMonthButton,class:this.getClassName("previous-month-button"),disabled:this.disabled,innerHTML:this.previousMonthButtonContent||void 0,onClick:this.previousMonth,type:"button"},e("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},e("polyline",{points:"15 18 9 12 15 6"}))),e("span",{class:this.getClassName("current-month")},e("select",{title:this.labels.monthSelect,"aria-label":this.labels.monthSelect,class:this.getClassName("month-select"),disabled:this.disabled,name:"month",onChange:this.onMonthSelect},(i=this.locale,new Array(12).fill(void 0).map(((t,e)=>{const s=k(new Date(`2006-${String(e+1).padStart(2,"0")}-01`));return Intl.DateTimeFormat(i,{month:"long"}).format(s)}))).map(((t,i)=>e("option",{key:t,selected:this.currentDate.getMonth()===i,value:i+1},t)))),e("input",{title:this.labels.yearSelect,"aria-label":this.labels.yearSelect,class:this.getClassName("year-select"),disabled:this.disabled,max:9999,maxLength:4,min:1,name:"year",onChange:this.onYearSelect,type:"number",value:this.currentDate.getFullYear()})),this.showMonthStepper&&e("button",{"aria-label":this.labels.nextMonthButton,class:this.getClassName("next-month-button"),disabled:this.disabled,innerHTML:this.nextMonthButtonContent||void 0,onClick:this.nextMonth,type:"button"},e("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},e("polyline",{points:"9 18 15 12 9 6"}))),this.showYearStepper&&e("button",{"aria-label":this.labels.nextYearButton,class:this.getClassName("next-year-button"),disabled:this.disabled,innerHTML:this.nextYearButtonContent||void 0,onClick:this.nextYear,type:"button"},e("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},e("polyline",{points:"13 17 18 12 13 7"}),e("polyline",{points:"6 17 11 12 6 7"})))),e("div",{class:this.getClassName("body")},e("table",{class:this.getClassName("calendar"),onKeyDown:this.onKeyDown,role:"grid"},e("thead",{class:this.getClassName("calendar-header")},e("tr",{class:this.getClassName("weekday-row")},this.weekdays.map((t=>e("th",{"aria-label":t[1],abbr:t[1],class:this.getClassName("weekday"),key:t[0],scope:"col"},e("span",null,t[0])))))),e("tbody",null,this.getCalendarRows().map((t=>{const i=`row-${t[0].getMonth()}-${t[0].getDate()}`;return e("tr",{class:this.getClassName("calendar-row"),key:i},t.map((t=>{var i,s,n,a,h;const r=f(t,this.currentDate),l=t.getMonth()!==this.currentDate.getMonth(),c=Array.isArray(this.value)?f(t,this.value[0])||f(t,this.value[1]):f(t,this.value),u=!!this.isRangeValue&&b(t,{from:null===(i=this.value)||void 0===i?void 0:i[0],to:(null===(s=this.value)||void 0===s?void 0:s[1])||this.hoveredDate||this.currentDate}),d=Boolean(null===(n=this.value)||void 0===n?void 0:n[0])?[null===(a=this.value)||void 0===a?void 0:a[0],(null===(h=this.value)||void 0===h?void 0:h[1])||this.hoveredDate].sort(((t,i)=>t-i)):[],v=this.range&&f(d[0],t),p=this.range&&f(d[1],t),w=f(t,new Date),y=this.disableDate(t),k=`cell-${t.getMonth()}-${t.getDate()}`,g={[this.getClassName("date")]:!0,[this.getClassName("date--current")]:r,[this.getClassName("date--disabled")]:y,[this.getClassName("date--overflowing")]:l,[this.getClassName("date--today")]:w,[this.getClassName("date--selected")]:c,[this.getClassName("date--in-range")]:u,[this.getClassName("date--start")]:v,[this.getClassName("date--end")]:p},D=c?"strong":w?"em":"span";return e("td",{"aria-disabled":String(y),"aria-selected":c?"true":void 0,"aria-current":w?"date":void 0,class:g,"data-date":o(t),key:k,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,role:"gridcell",tabIndex:!f(t,this.currentDate)||y||this.disabled?-1:0},e(D,{"aria-hidden":"true"},t.getDate()),e("span",{class:"visually-hidden"},Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long"}).format(t)))})))}))))),t&&e("div",{class:this.getClassName("footer")},this.showTodayButton&&e("button",{class:this.getClassName("today-button"),disabled:this.disabled,innerHTML:this.todayButtonContent||void 0,onClick:this.showToday,type:"button"},this.labels.todayButton),this.showClearButton&&e("button",{class:this.getClassName("clear-button"),disabled:this.disabled,innerHTML:this.clearButtonContent||void 0,onClick:this.clear,type:"button"},this.labels.clearButton))));var i}get el(){return n(this)}static get watchers(){return{firstDayOfWeek:["watchFirstDayOfWeek"],locale:["watchLocale"],range:["watchRange"],startDate:["watchStartDate"],value:["watchValue"]}}};m.style=".visually-hidden.sc-wc-datepicker{position:absolute;overflow:hidden;width:1px;height:1px;white-space:nowrap;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%)}";export{m as wc_datepicker}